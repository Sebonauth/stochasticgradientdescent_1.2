<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradient Descent Visualization - 3D Surface</title>
    <!-- Load Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Load MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* Overall page styling */
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #ffffff; /* White for background outside the box */
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #f2f1ef; /* Light warm grey inside the container */
            border-radius: 8px;
            margin-top: 40px;
            text-align: center; /* Center content inside the container */
        }

        /* Center the plot */
        #plot {
            display: block;
            margin: 0 auto;
            width: 100%;
        }

        /* Responsive styling */
        @media (max-width: 600px) {
            .container {
                padding: 20px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="plot"></div>
    </div>

    <script>
        // Function f(x, y) = x^2 + y^2
        function f(x, y) {
            return x * x + y * y;
        }

        // Generate data for surface plot
        function generateSurfaceData() {
            const xRange = [...Array(50).keys()].map(i => -5 + i * 0.2);  // X values from -5 to 5
            const yRange = [...Array(50).keys()].map(i => -5 + i * 0.2);  // Y values from -5 to 5

            let zValues = [];
            for (let i = 0; i < xRange.length; i++) {
                let row = [];
                for (let j = 0; j < yRange.length; j++) {
                    row.push(f(xRange[i], yRange[j]));
                }
                zValues.push(row);
            }

            return { x: xRange, y: yRange, z: zValues };
        }

        // Function to plot the 3D surface
        function plotSurface() {
            const surfaceData = generateSurfaceData();

            const surfacePlot = {
                x: surfaceData.x,
                y: surfaceData.y,
                z: surfaceData.z,
                type: 'surface',
                colorscale: 'Viridis',  // Color scale for the surface
                showscale: false  // Hide the color bar scale
            };

            const layout = {
                autosize: true,
                scene: {
                    xaxis: { title: 'x', titlefont: { color: '#34495e' }, backgroundcolor: '#ecf0f1' },
                    yaxis: { title: 'y', titlefont: { color: '#34495e' }, backgroundcolor: '#ecf0f1' },
                    zaxis: { title: 'f(x, y)', titlefont: { color: '#34495e' }, backgroundcolor: '#ecf0f1' },
                    aspectmode: 'cube', // Keep the axes equally scaled
                    dragmode: 'orbit',  // Enable only rotation
                },
                plot_bgcolor: '#ecf0f1',
                paper_bgcolor: '#f2f1ef',
                margin: { l: 50, r: 50, b: 50, t: 50 },
                height: 600
            };

            const config = {
                displayModeBar: false,  // Hide the Plotly toolbar
                scrollZoom: false,  // Disable zooming with scroll
                responsive: true,    // Ensure responsiveness
                staticPlot: false,    // Allow rotation
            };

            Plotly.newPlot('plot', [surfacePlot], layout, config);
        }

        // Ensure the plot renders on page load
        window.onload = function() {
            plotSurface();
            MathJax.typeset();  // Rerender LaTeX equations
        };
    </script>
</body>
</html>
